--// twf log group
-- Migration SQL that makes the change goes here.

CREATE TABLE twf_log_group (
subjob_id  bigint(20) ,
node_id  bigint(20) ,
group_type  decimal(3,0) COMMENT '用户组类型，见td_group_type' ,
createtime  datetime COMMENT '创建时间' ,
job_id  bigint(20) ,
user_count_sending  int(11) ,
user_count_control  int(11) NULL
)
COMMENT = '活动执行用户组列表';


CREATE TABLE twf_log_group_user (
subjob_id  bigint(20) NOT NULL ,
uni_id  varchar(64) NOT NULL COMMENT '统一客户ID' ,
control_group_type  int(2) COMMENT '发送控制组类型，见td_control_group_type' ,
PRIMARY KEY (subjob_id, uni_id)
)
COMMENT = '活动执行用户组用户 (subjob_id每隔10000就建立一个新的分区)'
PARTITION BY RANGE (subjob_id)
(
    PARTITION p000 VALUES LESS THAN (60000),
    PARTITION p001 VALUES LESS THAN (70000),
    PARTITION p002 VALUES LESS THAN (80000),
    PARTITION p003 VALUES LESS THAN (90000),
    PARTITION p004 VALUES LESS THAN (100000),
    PARTITION p005 VALUES LESS THAN (110000),
    PARTITION p006 VALUES LESS THAN (120000),
    PARTITION p007 VALUES LESS THAN (130000),
    PARTITION p008 VALUES LESS THAN (140000),
    PARTITION p009 VALUES LESS THAN (150000),
    PARTITION p010 VALUES LESS THAN (160000),
    PARTITION p011 VALUES LESS THAN (170000),
    PARTITION p012 VALUES LESS THAN (180000),
    PARTITION p013 VALUES LESS THAN (190000),
    PARTITION p014 VALUES LESS THAN (200000),
    PARTITION p015 VALUES LESS THAN (210000),
    PARTITION p016 VALUES LESS THAN (220000),
    PARTITION p017 VALUES LESS THAN (230000),
    PARTITION p018 VALUES LESS THAN (240000),
    PARTITION p019 VALUES LESS THAN (250000),
    PARTITION p020 VALUES LESS THAN (260000),
    PARTITION p021 VALUES LESS THAN (270000),
    PARTITION p022 VALUES LESS THAN (280000),
    PARTITION p023 VALUES LESS THAN (290000),
    PARTITION p024 VALUES LESS THAN (300000),
    PARTITION p025 VALUES LESS THAN (310000),
    PARTITION p026 VALUES LESS THAN (320000),
    PARTITION p027 VALUES LESS THAN (330000),
    PARTITION p028 VALUES LESS THAN (340000),
    PARTITION p029 VALUES LESS THAN (350000),
    PARTITION p030 VALUES LESS THAN (360000),
    PARTITION p031 VALUES LESS THAN (370000),
    PARTITION p032 VALUES LESS THAN (380000),
    PARTITION p033 VALUES LESS THAN (390000),
    PARTITION p034 VALUES LESS THAN (400000),
    PARTITION p035 VALUES LESS THAN (410000),
    PARTITION p036 VALUES LESS THAN (420000),
    PARTITION p037 VALUES LESS THAN (430000),
    PARTITION p038 VALUES LESS THAN (440000),
    PARTITION p039 VALUES LESS THAN (450000),
    PARTITION p040 VALUES LESS THAN (460000),
    PARTITION p041 VALUES LESS THAN (470000),
    PARTITION p042 VALUES LESS THAN (480000),
    PARTITION p043 VALUES LESS THAN (490000),
    PARTITION p044 VALUES LESS THAN (500000),
    PARTITION p045 VALUES LESS THAN (510000),
    PARTITION p046 VALUES LESS THAN (520000),
    PARTITION p047 VALUES LESS THAN (530000),
    PARTITION p048 VALUES LESS THAN (540000),
    PARTITION p049 VALUES LESS THAN (550000),
    PARTITION p050 VALUES LESS THAN (560000),
    PARTITION p051 VALUES LESS THAN (570000),
    PARTITION p052 VALUES LESS THAN (580000),
    PARTITION p053 VALUES LESS THAN (590000),
    PARTITION p054 VALUES LESS THAN (600000),
    PARTITION p055 VALUES LESS THAN (610000),
    PARTITION p056 VALUES LESS THAN (620000),
    PARTITION p057 VALUES LESS THAN (630000),
    PARTITION p058 VALUES LESS THAN (640000),
    PARTITION p059 VALUES LESS THAN (650000),
    PARTITION p060 VALUES LESS THAN (660000),
    PARTITION p061 VALUES LESS THAN (670000),
    PARTITION p062 VALUES LESS THAN (680000),
    PARTITION p063 VALUES LESS THAN (690000),
    PARTITION p064 VALUES LESS THAN (700000),
    PARTITION p065 VALUES LESS THAN (710000),
    PARTITION p066 VALUES LESS THAN (720000),
    PARTITION p067 VALUES LESS THAN (730000),
    PARTITION p068 VALUES LESS THAN (740000),
    PARTITION p069 VALUES LESS THAN (750000),
    PARTITION p070 VALUES LESS THAN (760000),
    PARTITION p071 VALUES LESS THAN (770000),
    PARTITION p072 VALUES LESS THAN (780000),
    PARTITION p073 VALUES LESS THAN (790000),
    PARTITION p074 VALUES LESS THAN (800000),
    PARTITION p075 VALUES LESS THAN (810000),
    PARTITION p076 VALUES LESS THAN (820000),
    PARTITION p077 VALUES LESS THAN (830000),
    PARTITION p078 VALUES LESS THAN (840000),
    PARTITION p079 VALUES LESS THAN (850000),
    PARTITION p080 VALUES LESS THAN (860000),
    PARTITION p081 VALUES LESS THAN (870000),
    PARTITION p082 VALUES LESS THAN (880000),
    PARTITION p083 VALUES LESS THAN (890000),
    PARTITION p084 VALUES LESS THAN (900000),
    PARTITION p085 VALUES LESS THAN (910000),
    PARTITION p086 VALUES LESS THAN (920000),
    PARTITION p087 VALUES LESS THAN (930000),
    PARTITION p088 VALUES LESS THAN (940000),
    PARTITION p089 VALUES LESS THAN (950000),
    PARTITION p090 VALUES LESS THAN (960000),
    PARTITION p091 VALUES LESS THAN (970000),
    PARTITION p092 VALUES LESS THAN (980000),
    PARTITION p093 VALUES LESS THAN (990000),
    PARTITION p094 VALUES LESS THAN (1000000),
    PARTITION p100 VALUES LESS THAN MAXVALUE
);


--//@UNDO
-- SQL to undo the change goes here.

drop table twf_log_group;
drop table twf_log_group_user;